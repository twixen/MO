\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[utf8]{listings}
\title{\textbf{Zadanie 1}}
\author{Damian Soliński\\
		Piotr Kulas\\
		Marek Skiba}
\date{15.10.2012}
\begin{document}

\maketitle

\section{Treść zadania}

Ustalić liczbę naturalną n$_{max}$. Wczytać n $\in$ \{0,1,...,n$_{max}$\} oraz wartości A$_{0}$,A$_{1}$,...,A$_{n}$. Następnie, dopóki "użytkownik się nie znudzi", wczytywać x$_{0}$ $\in$ $\mathbf{R}$ i wyznaczać w postaci ogólnej wielomian W = W(x$_{0}$) stopnia co najwyżej n taki, że $W^{(i)}$(x$_{0}$)=A$_{i}$,  i=0,1,...,n.  
\section{Schemat rozwiązywania zadania}
Ustalamy n$_{max}$. Wczytujemy n, a następnie wartości A$_{0}$,A$_{1}$,...,A$_{n}$, i na końcu x$_{0}$, aż użytkownik się znudzi. Układ n równań liniowych o n niewiadomych ma postać :  \newline
W$^{(0)}$ (x$_{0}$) = B$_{n}$x$_{0}$$^{n}$+ B$_{n-1}$x$_{0}$$^{n-1}$+...+ B$_{1}$x$_{0}$$^{1}$+ B$_{0}$x$_{0}$$^{0}$ = A$_{0}$ \newline
W$^{(1)}$ (x$_{0}$) = (B$_{n}$x$_{0}$$^{n}$)$^{(1)}$+ (B$_{n-1}$x$_{0}$$^{n-1}$)$^{(1)}$+...+ (B$_{1}$x$_{0}$$^{1}$)$^{(1)}$ = A$_{1}$ \newline
W$^{(2)}$ (x$_{0}$) = (B$_{n}$x$_{0}$$^{n}$)$^{(2)}$+ (B$_{n-1}$x$_{0}$$^{n-1}$)$^{(2)}$+...+ (B$_{2}$x$_{0}$$^{2}$)$^{(2)}$ = A$_{2}$ \newline
. \newline . \newline . \newline
W$^{(n-1)}$ (x$_{0}$) = (B$_{n}$x$_{0}$$^{n}$)$^{(n-1)}$+ (B$_{n-1}$x$_{0}$$^{n-1}$)$^{(n-1)}$ = A$_{n-1}$ \newline
W$^{(n)}$ (x$_{0}$) = (B$_{n}$x$_{0}$$^{n}$)$^{(n)}$= A$_{n}$ \newline
\newline Dla każdego działania (B$_{k}$x$_{0}$$^{k}$)$^{(i)}$ gdzie k$<$i wynik jest równy 0 i jest pominięte w układzie równań. \newline Licząc od ostatniego równania możemy łatwo uzyskać wyniki naszych niewiadomych A$_{0}$,A$_{1}$,...,A$_{n}$.
\section{Przykładowe rozwiązanie}
Niech n$_{max}$ = 100. Wczytujemy następne dane : \newline
\centerline{n=3,A$_{0}$=1,A$_{1}$=2,A$_{2}$=3A$_{3}$=6,x$_{0}$=2}
\newline \newline Powstaje układ równań : \newline 
B$_{3}$x$_{0}$$^{3}$+B$_{2}$x$_{0}$$^{2}$+B$_{1}$x$_{0}$$^{1}$+ B$_{0}$x$_{0}$$^{0}$ = 1 \newline
3B$_{3}$x$_{0}$$^{2}$+2B$_{2}$x$_{0}$$^{1}$+B$_{1}$x$_{0}$$^{0}$+ 0 = 2 \newline 
6B$_{3}$x$_{0}$$^{1}$+2B$_{2}$x$_{0}$$^{0}$+0+ 0 = 4 \newline
6B$_{3}$x$_{0}$$^{0}$+0+0+ 0 = 6 \newline \newline 
Wstawiamy wartość w miejsce x$_{0}$: \newline
B$_{3}$*8+B$_{2}$*4+B$_{1}$*2+ B$_{0}$ = 1 \newline
3B$_{3}$*4+2B$_{2}$*2+B$_{1}$ = 2 \newline 
6B$_{3}$*2+2B$_{2}$ = 4 \newline
6B$_{3}$= 6 \newline \newline 
Liczymy od końca : \newline
B$_{3}$ = $\frac {6}{6}$ = 1 \newline
12 * 1 + 2B$_{2}$ = 4 \newline
2B$_{2}$ = -8 \newline
B$_{2}$ = -4 \newline
3*1*4+2*(-4)*2+B$_{1}$ = 2 \newline
12-16+B$_{1}$ = 2 \newline
B$_{1}$=6 \newline
1*8+(-4)*4+6*2+ B$_{0}$ = 1 \newline
8-16+12+B$_{0}$=1 \newline
4+B$_{0}$=1 \newline
B$_{0}$=-3 \newline
\newline
Rozwiązaniem zadania jest : \newline
\centerline {W(x)=x$^{3}$-4x$^{2}$+6x-3}

\clearpage

\section{Opis działania:}
Na początku program zapyta o liczbę naturalną $n$ z przedziału od 0 do $n_{max}$. Przy wprowadzeniu błędnej wartości, program zapyta się o poprawną. Następnie poprosi o wprowadzenie $n + 1$ argumentów: A[0], A[1] ... A[n+1] oraz wartość $x_0$. Po tym kroku program wyświetli wynik wielomianu w postaci ogólnej. W kolejnym etapie program zapyta się o chęć wprowadzenia kolejnych wartości $x_0$, możemy odmówić wpisująć $nie$, albo kontynuować wpisując $tak$. Po wpisaniu $nie$ program kończy działanie, przy wpisaniu $tak$, będziemy mieli możliwość podawania kolejnego $x_0$. 

\section{Źródło programu:}
\lstset{language=C, basicstyle=\footnotesize, inputencoding=utf8,
literate={ą}{{\k{a}}}1 
  {Ą}{{\k{A}}}1
  {ę}{{\k{e}}}1
  {Ę}{{\k{E}}}1
  {ó}{{\'o}}1
  {Ó}{{\'O}}1
  {ś}{{\'s}}1
  {Ś}{{\'S}}1
  {ł}{{\l{}}}1
  {Ł}{{\L{}}}1
  {ż}{{\.z}}1
  {Ż}{{\.Z}}1
  {ź}{{\'z}}1
  {Ź}{{\'Z}}1
  {ć}{{\'c}}1
  {Ć}{{\'C}}1
  {ń}{{\'n}}1
  {Ń}{{\'N}}1
}

\begin{lstlisting}
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define N_MAX 100

double MyPow(double x0, int exp) {
    return exp > 0 ? MyPow(x0, exp - 1) * x0 : 1;
}

void fillMatrix(int n, double **t, double x0) {
    int i, j;
    for (j = 0; j < n; j++) {
        t[0][j] = 1;
        for (i = 1; i < n; i++) {
            if (i + j < n)t[i][j] = t[i - 1][j] * (n - i - j);
        }
    }
    for (i = 0; i < n; i++) {
        for (j = 0; j < n; j++) {
            if (i + j < n)t[i][j] *= MyPow(x0, n - j - i - 1);
        }
    }
}

void resolveMatrix(int n, double **t) {
    int i, j;
    for (i = n - 1; i >= 0; i--) {
        t[i][n] /= t[i][n - i - 1];
        for (j = 0; j < i; j++) {
            t[j][n] -= t[j][n - i - 1] * t[i][n] ;
        }
    }
}

void printMatrix(int n, double **t) {
    int i, j;
    for (i = 0; i < n; i++) {
        for (j = 0; j <= n; j++) {
            printf("%lf ", t[i][j]);
        }
        printf("\n");
    }
    printf("\n");
}

void clearMatrix(int n, double **t, double *A) {
    int i, j;
    for (i = 0; i < n; i++) {
        for (j = 0; j < n; j++) {
            t[i][j] = 0;
        }
        t[i][n] = A[i];
    }
}

void printPolynomial(int n, double **t) {
    int i = n;
    printf("Wynik: W(x) = ");
    while (--i) {
        printf("%lf", t[i][n]);
        printf("x^%d + ", i);
    }
    printf("%lfx^0\n", t[0][n]);
}

int main() {
    double *A, **t, x0;
    int i, n;
    char chce_podac_x[2];

    do {
        printf("Podaj liczbę naturalną z przedziału od 0 do %d: ", N_MAX);
        scanf("%d", &n);	
    } while(n < 0 || n > N_MAX);
    
    n += 1;
    A = malloc(n * sizeof (double));
    for (i = 0; i < n; i++) {
        printf("Podaj A[%d]: ", i);
        scanf("%lf", &A[i]);
    }
    t = malloc(n * sizeof (double*));
    for (i = 0; i < n; i++) {
        t[i] = malloc((n + 1) * sizeof (double));
    }

    do {
        printf("Podaj X0: ");    
        scanf("%lf", &x0);
        clearMatrix(n, t, A);
        fillMatrix(n, t, x0);
        resolveMatrix(n, t);
        printPolynomial(n, t);
         
        do {
            printf("Chcesz podać kolejne X0? (tak/nie): ");
            scanf("%s", chce_podac_x);
            if(strcmp(chce_podac_x, "tak") == 0 || strcmp(chce_podac_x, "nie") == 0) break;
        } while(1);
        
    } while (strcmp(chce_podac_x, "tak") == 0);
    
    return 0;
}
\end{lstlisting}

\section{Wynik programu:}
\lstset{language=bash, basicstyle=\footnotesize, inputencoding=utf8,
literate={ą}{{\k{a}}}1 
  {Ą}{{\k{A}}}1
  {ę}{{\k{e}}}1
  {Ę}{{\k{E}}}1
  {ó}{{\'o}}1
  {Ó}{{\'O}}1
  {ś}{{\'s}}1
  {Ś}{{\'S}}1
  {ł}{{\l{}}}1
  {Ł}{{\L{}}}1
  {ż}{{\.z}}1
  {Ż}{{\.Z}}1
  {ź}{{\'z}}1
  {Ź}{{\'Z}}1
  {ć}{{\'c}}1
  {Ć}{{\'C}}1
  {ń}{{\'n}}1
  {Ń}{{\'N}}1
}

}\begin{lstlisting}
[mskiba@sigma] ~/MetodyObliczeniowe $ gcc zad1.c -o zad1
[mskiba@sigma] ~/MetodyObliczeniowe $ ./zad1
Podaj liczbę naturalną z przedziału od 0 do 100: 101
Podaj liczbę naturalną z przedziału od 0 do 100: -1
Podaj liczbę naturalną z przedziału od 0 do 100: 3
Podaj A[0]: 2
Podaj A[1]: 3
Podaj A[2]: 4
Podaj A[3]: 6
Podaj X0: 2
Wynik: W(x) = 1.000000x^3 + -4.000000x^2 + 7.000000x^1 + -4.000000x^0
Chcesz podać kolejne X0? (tak/nie): s
Chcesz podać kolejne X0? (tak/nie): tak
Podaj X0: 4
Wynik: W(x) = 1.000000x^3 + -10.000000x^2 + 35.000000x^1 + -42.000000x^0
Chcesz podać kolejne X0? (tak/nie): nie
[mskiba@sigma] ~/MetodyObliczeniowe $
\end{lstlisting}
\end{document}
